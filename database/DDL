CREATE TABLE users (
	id 			SERIAL PRIMARY KEY,
	username 	VARCHAR(20) UNIQUE NOT NULL,
	password 	VARCHAR(60) UNIQUE NOT NULL,
	first_name 	VARCHAR(20) NOT NULL,
	last_name 	VARCHAR(20) NOT NULL,
	email 		VARCHAR(30) UNIQUE NOT NULL,
	role		VARCHAR(30) NOT NULL
);

CREATE TABLE members (
	id			SERIAL PRIMARY KEY,
	user_id		INT UNIQUE,
	gender		VARCHAR(10),
	birth_date 	DATE,
	weight		NUMERIC(4, 1),
	FOREIGN KEY (user_id) REFERENCES users (id) 
);

CREATE TABLE fitness_goal (
	id				SERIAL PRIMARY KEY,
	member_id		INT,
	goal_text		TEXT NOT NULL,
	status			BOOL NOT NULL,
	display			BOOL NOT NULL,
	date_created	TIMESTAMP NOT NULL,
	FOREIGN KEY (member_id) REFERENCES members (id)
);

CREATE TABLE exercise_routine (
	id			SERIAL PRIMARY KEY,
	member_id	INT,
	description	TEXT NOT NULL,
	FOREIGN KEY (member_id) REFERENCES members (id)
);

CREATE TABLE trainer (
	id		SERIAL PRIMARY KEY,
	user_id	INT	UNIQUE,
	FOREIGN KEY (user_id) REFERENCES users (id)
);

CREATE TABLE expertise (
	expertise	VARCHAR(30) UNIQUE NOT NULL,
	trainer_id	INT,
	description	TEXT,
	FOREIGN KEY (trainer_id) REFERENCES trainer (id),
	PRIMARY KEY (expertise, trainer_id)
);

CREATE TABLE room (
	id	SERIAL PRIMARY KEY
);

CREATE TABLE trains (
	id 				SERIAL PRIMARY KEY,
	trainer_id		INT,
	room_id			INT,
	timeslot		DATE NOT NULL,
	session_length	INT NOT NULL,
	FOREIGN KEY (trainer_id) REFERENCES trainer (id),
	FOREIGN KEY (room_id) REFERENCES room (id)
);

CREATE TABLE attendee (
	training_session_id	INT,
	member_id			INT,
	FOREIGN KEY (training_session_id) REFERENCES trains (id),
	FOREIGN KEY (member_id) REFERENCES members (id),
	PRIMARY KEY (training_session_id, member_id)
);

CREATE TABLE booking (
	training_session_id	INT,
	room_id				INT,
	FOREIGN KEY (training_session_id) REFERENCES trains (id),
	FOREIGN KEY (room_id) REFERENCES room (id),
	PRIMARY KEY (training_session_id, room_id)
);